---
title: "Figures"
output:
  pdf_document:
    fig_caption: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.path = "../figures/", fig.width = 5, fig.height = 6)
```

```{r read_chunks, cache=FALSE, echo=FALSE}
knitr::read_chunk("01_prepdata.R")
knitr::read_chunk("03_viz.R")
knitr::read_chunk("04_tables.R")
knitr::read_chunk("99_utils.R")
```

```{r source_utils, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r prep_nes_lagos, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r lake_characteristics_table, echo=FALSE, results='asis', message=FALSE, warning=FALSE}

```

```{r fig.cap="Major lake and watershed characteristics, factors, and processes affecting lake P retention. Shaded symbols indicate items typically considered in P retention models while open symbols indicate additional items considered in the present study.", echo=FALSE}
knitr::include_graphics("../figures/conceptual_p-cycle.pdf")
```

```{r fig.cap="Connectivity metric definitions along with examples of high and low connectivity lakes.", echo=FALSE}
knitr::include_graphics("../figures/conny_metric_key_crop.pdf")
```

```{r fig.cap="Diagram showing the lake watershed (LWS) and network watershed (NWS) of three lakes. Here the IWS of lake 3 encompasses the LWS of lake 2 because of it is smaller than 10 ha small size but it does not encompass the LWS of lake 1 because it has an area of at least 10 ha.  In contrast to the LWS boundaries, the NWS boundaries extend to the headwaters of the lake chain.", echo=FALSE}
knitr::include_graphics("../figures/iws_nws.pdf")
```

```{r global_vollenweider_viz, echo=FALSE, fig.cap="Residence time (yr) versus P retention for the NES dataset and the global model fit to the data where the solid line and shaded interval represents the median and central 95% interval estimates respectively.", warning=FALSE, fig.width = 3.5, fig.height = 3.2}

```

```{r cor_mat_hmap, echo=FALSE, warning=FALSE, fig.width=3.5, fig.height=3.2, fig.cap="Correlation between connectivity metrics and selected lake characteristics.", message=FALSE}

```

```{r partition_vollenweider_viz, echo=FALSE, fig.cap="Residence time (yr) versus P retention for the NES dataset and hierarchical model fits to the data where the solid lines and shaded intervals represent the median and central 95% model  estimates respectively. The green lines and symbols are the estimates from the lower of the two partition groups while the purple lines are estimates for the upper of the two partition groups (see Table 2).", fig.width = 4.8, fig.height=5, warning=FALSE}

```

```{r k_viz, echo=FALSE, message=FALSE, fig.cap="Distribution of the k parameter from the Vollenweider's equation in low and high connectivity partitions at the (A) LWS and (B) NWS scales. Green symbols indicate the lower of the two partition groups while purple symbols represent the higher of the two partition groups (see Table 2).", fig.width=5, fig.height=3.8, warning=FALSE}

```

```{r model_results_table, echo=FALSE, results='asis'}

```

```{r maps, echo=FALSE, fig.cap="Maps showing the locations of lake connectivity partitions. Green symbols indicate the lower of the two partition groups while purple symbols represent the higher of the two partition groups (see Table 2).", warning=FALSE, message=FALSE}

```

<!-- * Olin Lake has a completely undeveloped shoreline -->
<!-- * Madison Lake is impaired according to MPCA -->


```{r recursive_partitioning_viz, echo=FALSE, eval=FALSE}

```

```{r graphical_exploratory_analysis, echo=FALSE, message=FALSE, warning=FALSE, fig.height=8.4, fig.cap="Exploratory plots"}

```

```{r graphical_exploratory_analysis_cont, echo=FALSE, message=FALSE, warning=FALSE, fig.height=6.3, fig.cap="Exploratory plots cont"}

```

```{r graphical_exploratory_analysis_cont_cont, echo=FALSE, message=FALSE, warning=FALSE, fig.height=6.3, fig.cap="Exploratory plots cont x 2"}

```

```{r conceptual_summary, echo=FALSE, fig.cap="Connectivity metric effects on lake processing.", eval=FALSE}
dt <- data.frame(
  rbind(
    c("closest lake distance", "lower", "higher", "lower", "higher", "lake-stream", "long"), 
    c("average link length", "lower", "higher", "lower", "higher", "stream", "long"), 
    c("lakeconnection", "DR_Stream", "higher", "lower", "higher", "lake", "long"), 
    c("upstream lake area", "lower", "higher", "lower", "higher", "lake", "lat"), 
    c("stream density", "higher", "higher", "lower", "higher", "stream", "lat"),
    c("baseflow", "higher", "higher", "lower", "higher", "stream", "lat"), 
    c("stream order ratio", "higher", "higher", "lower", "higher", "stream", "long")))

names(dt) <- c("metric", "direction", "k", "connectivity", "in_lake_processing", "axis", "connectivity type")

knitr::kable(dt)
```
