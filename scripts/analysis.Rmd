---
title: "Figures"
output:
  pdf_document:
    fig_caption: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.path = "../figures/", fig.width = 5, fig.height = 6)
```

```{r read_chunks, cache=FALSE, echo=FALSE}
knitr::read_chunk("01_prepdata.R")
knitr::read_chunk("03_viz.R")
knitr::read_chunk("04_tables.R")
knitr::read_chunk("99_utils.R")
```

```{r source_utils, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r prep_nes_lagos, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r lake_characteristics_table, echo=FALSE, results='asis'}

```

```{r fig.cap="Diagram showing the inter-lake watershed (IWS) and network watershed (NWS) of three lakes. Here the IWS of lake 3 encompasses the IWS of lake 2 because of its small size but not the IWS of lake 1 because it is large.  In contrast, the NWS of lake 3 extends to the headwaters of the lake chain.", echo=FALSE}
knitr::include_graphics("../figures/iws_nws.pdf")
```

```{r fig.cap="Connectivity metric definitions and examples of high and low connectivity lakes.", echo=FALSE}
knitr::include_graphics("../figures/conny_metric_key_crop.pdf")
```

```{r cor_mat_hmap, echo=FALSE, warning=FALSE, fig.width=3.5, fig.height=3.2, fig.cap="Correlation between connectivity metrics and selected lake characteristics.", message=FALSE}

```

```{r global_vollenweider_viz, echo=FALSE, fig.cap="Median and central 95% interval estimates from global model posterior relative to NES data.", warning=FALSE, fig.width = 3.5, fig.height = 3.2}

```

```{r partition_vollenweider_viz, echo=FALSE, fig.cap="Median and central 95% interval estimates from hierarchical model posteriors relative to NES data. Lighter colored lines and lighter colored polygons represent the estimates from the lower of the two partition groups (see Table 2).", fig.width = 4.8, fig.height=5, warning=FALSE}

```

```{r k_viz, echo=FALSE, message=FALSE, fig.cap="Distribution of Vollenweider's k in low and high connectivity partitions at the IWS and NWS scales. Lighter colors indicate the lower of the two partition groups (see Table 2).", fig.width=5, fig.height=3.8, warning=FALSE}

```

```{r model_results_table, echo=FALSE, results='asis'}

```

```{r maps, echo=FALSE, fig.cap="Map of lake connectivity partitions where lighter colored lakes have metric values on the lower side of their respective partitions (see Table 2).", warning=FALSE, message=FALSE}

```

<!-- * Olin Lake has a completely undeveloped shoreline -->
<!-- * Madison Lake is impaired according to MPCA -->

```{r recursive_partitioning_viz, echo=FALSE, eval=FALSE}

```

```{r graphical_exploratory_analysis, echo=FALSE, message=FALSE, warning=FALSE, fig.height=8.4, fig.cap="Exploratory plots"}

```

```{r graphical_exploratory_analysis_cont, echo=FALSE, message=FALSE, warning=FALSE, fig.height=6.3, fig.cap="Exploratory plots cont"}

```

```{r graphical_exploratory_analysis_cont_cont, echo=FALSE, message=FALSE, warning=FALSE, fig.height=6.3, fig.cap="Exploratory plots cont x 2"}

```

```{r conceptual_summary, echo=FALSE, fig.cap="Connectivity metric effects on lake processing.", eval=FALSE}
dt <- data.frame(
  rbind(
    c("closest lake distance", "lower", "higher", "lower", "higher", "lake-stream", "long"), 
    c("average link length", "lower", "higher", "lower", "higher", "stream", "long"), 
    c("lakeconnection", "DR_Stream", "higher", "lower", "higher", "lake", "long"), 
    c("upstream lake area", "lower", "higher", "lower", "higher", "lake", "lat"), 
    c("stream density", "higher", "higher", "lower", "higher", "stream", "lat"),
    c("baseflow", "higher", "higher", "lower", "higher", "stream", "lat"), 
    c("stream order ratio", "higher", "higher", "lower", "higher", "stream", "long")))

names(dt) <- c("metric", "direction", "k", "connectivity", "in_lake_processing", "axis", "connectivity type")

knitr::kable(dt)
```
