---
title: "Figures"
output:
  pdf_document:
    fig_caption: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.path = "../figures/", fig.width = 5, fig.height = 6)
```

```{r read_chunks, cache=FALSE, echo=FALSE}
knitr::read_chunk("01_prepdata.R")
knitr::read_chunk("03_viz.R")
knitr::read_chunk("04_tables.R")
knitr::read_chunk("99_utils.R")
```

```{r source_utils, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r prep_nes_lagos, message=FALSE, results='hide', echo=FALSE, warning=FALSE}

```

```{r lake_characteristics_table, echo=FALSE, results='asis'}

```

```{r fig.cap="Watershed diagram", echo=FALSE}
knitr::include_graphics("../figures/iws_nws.pdf")
```

```{r fig.cap="Definition of connectivity metrics.", echo=FALSE}
knitr::include_graphics("../figures/conny_metric_key_crop.pdf")
```

```{r cor_mat_hmap, echo=FALSE, warning=FALSE, fig.width=3.5, fig.height=3.2, fig.cap="Connectivity metric correlation heatmap.", message=FALSE}

```

```{r global_vollenweider_viz, echo=FALSE, fig.cap="Median and central 95% interval estimates from the non-hierarchical model posterior relative to raw data.", warning=FALSE, fig.width = 3.5, fig.height = 3.2}

```

```{r partition_vollenweider_viz, echo=FALSE, fig.cap="Median and central 95% interval estimates from the hierarchical model posteriors relative to raw data. Lighter colored lines and shaded polygons represent the estimates from the lower of the two partition groups (see Table 3).", fig.width = 4.8, fig.height=5, warning=FALSE}

```

```{r k_viz, echo=FALSE, message=FALSE, fig.cap="Distribution of Vollenweider's k in low and high connectivity partitions at the IWS and NWS scales.", fig.width=5, fig.height=3.8, warning=FALSE}

```

```{r model_results_table, echo=FALSE, results='asis'}

```

```{r maps, echo=FALSE, fig.cap="Map of lake connectivity partitions where lighter colored lakes have matric values on the lower side of the respective partition in Table 3.", warning=FALSE, message=FALSE}

```

<!-- * Olin Lake has a completely undeveloped shoreline -->
<!-- * Madison Lake is impaired according to MPCA -->

```{r recursive_partitioning_viz, echo=FALSE, eval=FALSE}

```

```{r graphical_exploratory_analysis, echo=FALSE, message=FALSE, warning=FALSE, fig.height=8.4, fig.cap="Exploratory plots"}

```

```{r graphical_exploratory_analysis_cont, echo=FALSE, message=FALSE, warning=FALSE, fig.height=6.3, fig.cap="Exploratory plots cont"}

```

```{r conceptual_summary, echo=FALSE, fig.cap="Connectivity metric effects on lake processing.", eval=FALSE}
dt <- data.frame(
  rbind(
    c("closest lake distance", "lower", "higher", "lower", "higher", "lake-stream", "long"), 
    c("average link length", "lower", "higher", "lower", "higher", "stream", "long"), 
    c("lakeconnection", "DR_Stream", "higher", "lower", "higher", "lake", "long"), 
    c("upstream lake area", "lower", "higher", "lower", "higher", "lake", "lat"), 
    c("stream density", "higher", "higher", "lower", "higher", "stream", "lat"),
    c("baseflow", "higher", "higher", "lower", "higher", "stream", "lat"), 
    c("stream order ratio", "higher", "higher", "lower", "higher", "stream", "long")))

names(dt) <- c("metric", "direction", "k", "connectivity", "in_lake_processing", "axis", "connectivity type")

knitr::kable(dt)
```
